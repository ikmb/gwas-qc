BootStrap: debootstrap
OSVersion: zesty
MirrorURL: http://ftp.hosteurope.de/mirror/archive.ubuntu.com/ubuntu/

%post

sed -i 's/$/ universe/' /etc/apt/sources.list
apt -y update
apt -y install build-essential locales wget unzip r-base

locale-gen en_US en_US.UTF-8 de_DE.UTF-8 de_DE

echo "Installing Plink 1.07"
cd /opt
wget 'http://zzz.bwh.harvard.edu/plink/dist/plink-1.07-x86_64.zip'
unzip plink-1.07-x86_64.zip
mv plink-1.07-x86_64 plink-1.07
rm plink-1.07-x86_64.zip

echo "Installing Plink 1.9b4.4"
cd /opt
mkdir plink-1.9b4.4
cd plink-1.9b4.4
wget https://www.cog-genomics.org/static/bin/plink170531/plink_linux_x86_64.zip
unzip plink_linux_x86_64.zip
rm plink_linux_x86_64.zip

echo "Installin R packages"
echo "install.packages('Rserve', repo='http://cran.uni-muenster.de/')" >/tmp/packages.r
echo "install.packages('hwde', repo='http://cran.uni-muenster.de/')" >>/tmp/packages.r
Rscript /tmp/packages.r

